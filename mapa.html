<!DOCTYPE html>
<html>
<head>
    <title>Mapa con BrÃºjula Interactiva</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        body {
            margin: 0;
            display: flex;
            height: 100vh;
        }
        #map {
            flex-grow: 1;
            transform-origin: center center;
        }
        #compass {
            position: absolute;
            top: 10px;
            right: 10px;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.5);
            color: white;
            border-radius: 5px;
            padding: 10px;
            font-family: Arial, sans-serif;
            text-align: center;
            cursor: pointer;
        }
        #compass:hover {
            background: rgba(0, 0, 0, 0.7);
        }
        #compass span {
            display: block;
        }
    </style>
</head>
<body>
    <div id="map"></div>
    <div id="compass">
        <span>ðŸ§­</span>
        <span id="currentDirection">N</span>
    </div>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        const map = L.map('map', {
            crs: L.CRS.Simple,
            maxZoom: 4,
            minZoom: -2
        });

        const bounds = [[0, 0], [2048, 2048]];
        L.imageOverlay('mapa.png', bounds).addTo(map);
        map.fitBounds(bounds);

        // Variables para el estado de la brÃºjula
        let currentAngle = 0;
        const directions = ['N', 'E', 'S', 'W']; // Norte, Este, Sur, Oeste

        // Rotar el mapa
        function rotateMap(angle) {
            currentAngle = (currentAngle + angle) % 360;
            const mapContainer = document.getElementById('map');
            mapContainer.style.transform = `rotate(${currentAngle}deg)`;

            // Ajustar la direcciÃ³n de la brÃºjula
            const directionIndex = Math.round((360 - currentAngle) / 90) % 4;
            document.getElementById('currentDirection').textContent = directions[directionIndex];
        }

        // Control de la brÃºjula
        const compass = document.getElementById('compass');
        compass.addEventListener('click', () => {
            rotateMap(90); // Gira 90Â° en cada clic
        });
    </script>
</body>
</html>